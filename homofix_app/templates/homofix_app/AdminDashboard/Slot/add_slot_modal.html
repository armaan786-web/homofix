<div class="modal  fade" id="exampleVerticallycenteredModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-md modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header mb-2">
                {% comment %} <h5 class="modal-title">Category</h5> {% endcomment %}
                <div class="card-title d-flex align-items-center">
                    <div><i class="bx bxs-user me-1 font-22 text-white"></i>
                    </div>
                    <h5 class="mb-0 text-white">Add Slot</h5>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            

            <form action="{% url 'add_universal_slot' %}" method="POST" id="categoryform" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row mb-1">
                    <div class="col-xl-9 mx-auto">
                       
                         <div id="sub-categoriesicon">
                            <div class="sub-category mb-3 mx-3" id="sub-categoriesicon-1">
                                <label for="inputEnterYourName" class="form-label">Date</label>
                                <div class="input-group">
                                    {% comment %} <input type="number" class="form-control" placeholder="Enter Your Version" name="version"> {% endcomment %}

                                    <input type="date"  class="form-control" placeholder="Enter Your Version" name="version">

                                </div>
                            </div>
                        </div>

                         <div id="slot">
                            <div class="slot mb-3 mx-3" id="slot">
                                <label for="inputEnterYourName" class="form-label">Slot</label>
                                <div class="input-group">
                                    <select name="slot" id="slotSelect" class="form-control">
                                        {% for value, label in slot_choices %}
                                            <option value="{{ value }}">{{ label }}</option>
                                        {% endfor %}
                                    </select>
                                    
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="sub-category mb-3 mx-3">
                                <label for="inputEnterYourName" class="form-label">State</label>
                                <div class="input-group">
                                    <select name="state" id="stateSelect" class="form-control">
                                        <option value="">-- Select State --</option>
                                        {% for state in unique_states %}
                                            <option value="{{ state }}">{{ state }}</option>
                                        {% endfor %}
                                    </select>

                                </div>
                                
                            </div>
                            <div class="sub-category mb-3 mx-3">
                                <label for="inputEnterYourName" class="form-label">Pincode</label>
                                <div class="input-group">
                                    
                                    <select class="single-select" name="pincode" id="pincode-select" multiple >
                                        <option class="text-black" value="" > --Select--</option>
                                    </select>

                                </div>
                                
                            </div>
                        </div>
                        {% comment %} <button type="button" class="btn btn-light mx-3" id="add-sub-category"><i class="bx bxs-plus-square"></i>New</button> {% endcomment %}
                        
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save </button>
                </div>
            </form>
            
            
        </div>
    </div>
</div>

<!-- At the bottom of slot_list.html -->



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    console.log("Slot modal script loaded...");

    $(document).on('change', '#stateSelect', function () {
        console.log("armaanuuuuu")
        var selectedState = $(this).val();
        $('#pincode-select').empty();

        if (selectedState) {
            $.ajax({
                url: "{% url 'get_pincodes_by_state' %}",
                data: {
                    'state': selectedState
                },
                dataType: 'json',
                success: function (data) {
                    var pincodes = data.pincodes;
                    console.log("pincodesssssss",pincodes)
                    if (pincodes.length > 0) {
                        for (var i = 0; i < pincodes.length; i++) {
                            $('#pincode-select').append(
                                '<option value="' + pincodes[i] + '">' + pincodes[i] + '</option>'
                            );
                        }
                    } else {
                        $('#pincode-select').append('<option value="">No pincodes found</option>');
                    }
                }
            });
        }
    });
</script>


 