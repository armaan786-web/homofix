{% extends 'Support_templates/Base/base.html' %}
{% load static %}
{% block main-content %}
<style>
   .nowrap {
       white-space: nowrap;
     }
</style>
<div class="page-content">
   <div class="card radius-10">
      <div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 row-group g-0">
         <div class="col">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <h5 class="mb-0">{{booking_count}}</h5>
                  <div class="ms-auto">
                     <i class='bx bx-cart fs-3 text-white'></i>
                  </div>
               </div>
               <div class="progress my-3" style="height:4px;">
                  <div class="progress-bar" role="progressbar" style="width: 55%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
               </div>
               <div class="d-flex align-items-center text-white">
                  <p class="mb-0">Total New Booking</p>
                  {% comment %} 
                  <p class="mb-0 ms-auto">+5.2%<span><i class='bx bx-up-arrow-alt'></i></span></p>
                  {% endcomment %}
               </div>
            </div>
         </div>
         <div class="col">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <h5 class="mb-0">{{booking_complete}}</h5>
                  <div class="ms-auto">
                     <i class='bx bx-cart fs-3 text-white'></i>
                  </div>
               </div>
               <div class="progress my-3" style="height:4px;">
                  <div class="progress-bar" role="progressbar" style="width: 55%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
               </div>
               <div class="d-flex align-items-center text-white">
                  <p class="mb-0">Total Complete Booking</p>
                  {% comment %} 
                  <p class="mb-0 ms-auto">+4.2%<span><i class='bx bx-up-arrow-alt'></i></span></p>
                  {% endcomment %}
               </div>
            </div>
         </div>
         <div class="col">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <h5 class="mb-0">{{rebooking_count}}</h5>
                  <div class="ms-auto">
                     <i class='bx bx-cart fs-3 text-white'></i>
                  </div>
               </div>
               <div class="progress my-3" style="height:4px;">
                  <div class="progress-bar" role="progressbar" style="width: 55%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
               </div>
               <div class="d-flex align-items-center text-white">
                  <p class="mb-0">Total Rebooking</p>
                  {% comment %} 
                  <p class="mb-0 ms-auto">+1.2%<span><i class='bx bx-up-arrow-alt'></i></span></p>
                  {% endcomment %}
               </div>
            </div>
         </div>
       
      </div>
      <!--end row-->
   </div>
   {% comment %} 
   <div class="row">
      <div class="col-12 col-lg-8 col-xl-8 d-flex">
         <div class="card radius-10 w-100">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <div>
                     <h5 class="mb-0">Site Traffic</h5>
                  </div>
                  <div class="dropdown options ms-auto">
                     <div class="dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown">
                        <i class='bx bx-dots-horizontal-rounded'></i>
                     </div>
                     <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                     </ul>
                  </div>
               </div>
               <div class="d-flex align-items-center ms-auto font-13 gap-2 my-3">
                  <span class="border px-1 rounded cursor-pointer"><i class="bx bxs-circle me-1 text-white"></i>New Visitor</span>
                  <span class="border px-1 rounded cursor-pointer"><i class="bx bxs-circle me-1 text-light-1"></i>Old Visitor</span>
               </div>
               <div class="chart-container-1">
                  <canvas id="chart1"></canvas>
               </div>
            </div>
            <div class="row row-cols-1 row-cols-md-3 row-cols-xl-3 g-0 row-group text-center border-top">
               <div class="col">
                  <div class="p-3">
                     <h5 class="mb-0">45.87M</h5>
                     <small class="mb-0">Overall Visitor <span> <i class="bx bx-up-arrow-alt align-middle"></i> 2.43%</span></small>
                  </div>
               </div>
               <div class="col">
                  <div class="p-3">
                     <h5 class="mb-0">15:48</h5>
                     <small class="mb-0">Visitor Duration <span> <i class="bx bx-up-arrow-alt align-middle"></i> 12.65%</span></small>
                  </div>
               </div>
               <div class="col">
                  <div class="p-3">
                     <h5 class="mb-0">245.65</h5>
                     <small class="mb-0">Pages/Visit <span> <i class="bx bx-up-arrow-alt align-middle"></i> 5.62%</span></small>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div class="col-12 col-lg-4 col-xl-4 d-flex">
         <div class="card radius-10 overflow-hidden w-100">
            <div class="card-body">
               <div class="d-flex align-items-center mb-2">
                  <div>
                     <h5 class="mb-0">Weekly sales</h5>
                  </div>
                  <div class="dropdown options ms-auto">
                     <div class="dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown">
                        <i class='bx bx-dots-horizontal-rounded'></i>
                     </div>
                     <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                     </ul>
                  </div>
               </div>
               <div class="chart-js-container2">
                  <div class="piechart-legend">
                     <h3 class="mb-1">95K</h3>
                     <h6 class="mb-0">Total sales</h6>
                  </div>
                  <canvas id="chart2"></canvas>
               </div>
            </div>
            <div class="table-responsive">
               <table class="table align-items-center mb-0">
                  <tbody>
                     <tr class="border-top">
                        <td><i class="bx bxs-circle text-white me-2"></i> Direct</td>
                        <td>$5856</td>
                        <td>+55%</td>
                     </tr>
                     <tr>
                        <td><i class="bx bxs-circle text-light-2 me-2"></i>Affiliate</td>
                        <td>$2602</td>
                        <td>+25%</td>
                     </tr>
                     <tr>
                        <td><i class="bx bxs-circle text-light-3 me-2"></i>E-mail</td>
                        <td>$1802</td>
                        <td>+15%</td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
      </div>
   </div>
   <!--End Row--> {% endcomment %}
   {% comment %} <div class="row row-cols-1 row-cols-lg-3">
      <div class="col">
         <div class="card radius-10">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <div class="w_chart easy-dash-chart1" data-percent="60">
                     <span class="w_percent"></span>
                  </div>
                  <div class="ms-3">
                     <h6 class="mb-0">Facebook Followers</h6>
                     <small class="mb-0">22.14% <i class='bx bxs-up-arrow align-middle me-1'></i>Since Last Week</small>
                  </div>
                  <div class="ms-auto fs-1 text-white"><i class='bx bxl-facebook'></i></div>
               </div>
            </div>
         </div>
      </div>
      <div class="col">
         <div class="card radius-10">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <div class="w_chart easy-dash-chart2" data-percent="65">
                     <span class="w_percent"></span>
                  </div>
                  <div class="ms-3">
                     <h6 class="mb-0">Twitter Tweets</h6>
                     <small class="mb-0">32.15% <i class='bx bxs-up-arrow align-middle me-1'></i>Since Last Week</small>
                  </div>
                  <div class="ms-auto fs-1 text-white"><i class='bx bxl-twitter'></i></div>
               </div>
            </div>
         </div>
      </div>
      <div class="col">
         <div class="card radius-10">
            <div class="card-body">
               <div class="d-flex align-items-center">
                  <div class="w_chart easy-dash-chart3" data-percent="75">
                     <span class="w_percent"></span>
                  </div>
                  <div class="ms-3">
                     <h6 class="mb-0">Youtube Subscribers</h6>
                     <small class="mb-0">58.24% <i class='bx bxs-up-arrow align-middle me-1'></i>Since Last Week</small>
                  </div>
                  <div class="ms-auto fs-1 text-white"><i class='bx bxl-youtube'></i></div>
               </div>
            </div>
         </div>
      </div>
   </div> {% endcomment %}
   <!--End Row-->
   {% comment %} <div class="row">
      <div class="col-12 col-lg-12 col-xl-6">
         <div class="card radius-10">
            <div class="card-body">
               <div class="d-flex align-items-center mb-3">
                  <div>
                     <h5 class="mb-0">Selling Region</h5>
                  </div>
                  <div class="dropdown options ms-auto">
                     <div class="dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown">
                        <i class='bx bx-dots-horizontal-rounded'></i>
                     </div>
                     <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                     </ul>
                  </div>
               </div>
               <div id="dashboard-map" style="height: 335px;"></div>
            </div>
            <div class="table-responsive">
               <table class="table table-hover align-items-center mb-0">
                  <thead class="table-light">
                     <tr>
                        <th>Country</th>
                        <th>Income</th>
                        <th>Trend</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td><i class="flag-icon flag-icon-ca me-2"></i> USA</td>
                        <td>$4,586</td>
                        <td><span id="trendchart1"></span></td>
                     </tr>
                     <tr>
                        <td><i class="flag-icon flag-icon-us me-2"></i>Canada</td>
                        <td>$2,089</td>
                        <td><span id="trendchart2"></span></td>
                     </tr>
                     <tr>
                        <td><i class="flag-icon flag-icon-in me-2"></i>India</td>
                        <td>$3,039</td>
                        <td><span id="trendchart3"></span></td>
                     </tr>
                     <tr>
                        <td><i class="flag-icon flag-icon-gb me-2"></i>UK</td>
                        <td>$2,309</td>
                        <td><span id="trendchart4"></span></td>
                     </tr>
                     <tr>
                        <td><i class="flag-icon flag-icon-de me-2"></i>Germany</td>
                        <td>$7,209</td>
                        <td><span id="trendchart5"></span></td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
      </div>
      <div class="col-12 col-lg-12 col-xl-6">
         <div class="row">
            <div class="col-12 col-lg-6">
               <div class="card radius-10 overflow-hidden">
                  <div class="card-body">
                     <p class="mb-2">Page Views</p>
                     <h4 class="mb-0">8,293 <small class="font-13 text-white">5.2% <i class="bx bx-up-arrow-alt"></i></small></h4>
                  </div>
                  <div class="chart-container-2">
                     <canvas id="chart3"></canvas>
                  </div>
               </div>
            </div>
            <div class="col-12 col-lg-6">
               <div class="card radius-10 overflow-hidden">
                  <div class="card-body">
                     <p class="mb-2">Total Clicks</p>
                     <h4 class="mb-0">7,493 <small class="font-13 text-white">1.4% <i class="bx bx-up-arrow-alt"></i></small></h4>
                  </div>
                  <div class="chart-container-2">
                     <canvas id="chart4"></canvas>
                  </div>
               </div>
            </div>
            <div class="col-12 col-lg-6">
               <div class="card radius-10">
                  <div class="card-body text-center">
                     <p class="mb-4">Total Downloads</p>
                     <input class="knob" data-width="190" data-height="190" data-readonly="true" data-thickness=".15" data-angleoffset="90" data-linecap="round" data-bgcolor="rgba(0, 0, 0, 0.08)" data-fgcolor="#fff" data-max="15000" value="8550">
                     <hr>
                     <p class="mb-0 small-font text-center">3.4% <i class="zmdi zmdi-long-arrow-up"></i> since yesterday</p>
                  </div>
               </div>
            </div>
            <div class="col-12 col-lg-6">
               <div class="card radius-10">
                  <div class="card-body">
                     <p>Device Storage</p>
                     <h4 class="mb-3">42620/50000</h4>
                     <hr>
                     <div class="progress-wrapper mb-4">
                        <p>Documents <span class="float-end">12GB</span></p>
                        <div class="progress" style="height:5px;">
                           <div class="progress-bar bg-white" style="width:80%"></div>
                        </div>
                     </div>
                     <div class="progress-wrapper mb-4">
                        <p>Images <span class="float-end">10GB</span></p>
                        <div class="progress" style="height:5px;">
                           <div class="progress-bar bg-white" style="width:60%"></div>
                        </div>
                     </div>
                     <div class="progress-wrapper mb-4">
                        <p>Mails <span class="float-end">5GB</span></p>
                        <div class="progress" style="height:5px;">
                           <div class="progress-bar bg-white" style="width:40%"></div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div> {% endcomment %}
   <!--End Row-->
   
   <!--End Row-->
   <div class="card radius-10">
      <div class="card-body">
         <div class="d-flex align-items-center">
            <div>
               <h5 class="mb-0">Orders Summary</h5>
            </div>
            <div class="dropdown options ms-auto">
               <div class="dropdown-toggle dropdown-toggle-nocaret" data-bs-toggle="dropdown">
                  <i class='bx bx-dots-horizontal-rounded'></i>
               </div>
               <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'support_orders' %}">Go to New Booking</a></li>
                  
               </ul>
            </div>
         </div>
         <hr>
         <div class="table-responsive">
            <table class="table align-middle mb-0">
               <thead class="table-light">
                  <tr>
                     <th>Order id</th>
                     <th>Category</th>
                     <th>Subcategory</th>
                     <th>Product</th>
                     <th>Customer</th>
                     <th>Mobile</th>
                     <th>City</th>
                     <th>State</th>
                     <th>Area</th>
                     <th>Zipcode</th>
                     <th>Address</th>
                     <th>Status</th>
                     <th>Total</th>
                     <th>Date</th>
                     <th>Order By</th>
                  </tr>
               </thead>
               <tbody>
                  {% for i in booking %}
                  <tr>
                     <td>#{{i.order_id}}</td>
                     <td>
                        {% if i.booking_product.exists %}
                        {{ i.booking_product.first.product.subcategory.Category_id.category_name }}
                        {% else %}
                        N/A
                        {% endif %} 
                     </td>
                     <td>
                        {% if i.booking_product.exists %}
                        {{ i.booking_product.first.product.subcategory.name }}
                        {% else %}
                        N/A
                        {% endif %} 
                     </td>
                     <td>
                        {% for booking_product in i.booking_product.all %}
                        <h6 class="mb-1 nowrap font-14 nowrap">{{ booking_product.product.name }} ({{ booking_product.quantity }})</h6>
                        {% endfor %}
                        {% comment %} 
                        <div class="d-flex align-items-center">
                           <div class="recent-product-img">
                              <img src="{% static 'assets/images/icons/chair.png' %}" alt="">
                           </div>
                           <div class="ms-2">
                              <h6 class="mb-1 font-14">Light Blue Chair</h6>
                           </div>
                        </div>
                        {% endcomment %}
                     </td>
                     {% comment %} 
                     <td>Brooklyn Zeo</td>
                     {% endcomment %}
                     <td>{{i.booking_customer}}</td>
                     <td>{{i.mobile}}</td>
                     <td>{{i.city}}</td>
                     <td>{{i.state}}</td>
                     <td>{{i.area}}</td>
                     <td>{{i.zipcode}}</td>
                     <td>{{i.booking_address}}</td>
                     <td>
                        <div class="badge rounded-pill bg-light p-2 text-uppercase px-3"><i
                           class='bx bxs-circle me-1'></i>{{i.status}}</div>
                     </td>
                     <td>
                        {{i.final_amount}}
                     </td>
                     <td class="nowrap">{{i.booking_date}}</td>
                     </td>
                     <td class="nowrap">
                        {% if i.supported_by %}
                        {{i.supported_by.admin.username}}
                        {% elif i.admin_by%}
                        {{i.admin_by.admin.username}}
                        {% else %}
                        Website
                        {% endif %}
                     </td>
                  </tr>
                  {% comment %} 
                  <tr >
                     <td>#{{forloop.counter}}</td>
                     <td>
                        #{{booking.order_id}}
                     </td>
                     <td>
                        {% if booking.bookingproduct_set.exists %}
                        {{ booking.bookingproduct_set.first.product.subcategory.Category_id.category_name }}
                        {% else %}
                        N/A
                        {% endif %} 
                     </td>
                     <td>
                        {% if booking.bookingproduct_set.exists %}
                        {{ booking.bookingproduct_set.first.product.subcategory.name }}
                        {% else %}
                        N/A
                        {% endif %} 
                     </td>
                     <td>
                        <div class="d-flex align-items-center">
                           <div class="ms-2">
                              {% for booking_product in booking.bookingproduct_set.all %}
                              <h6 class="mb-1 nowrap font-14">{{ booking_product.product.name }} ({{ booking_product.quantity }})</h6>
                              {% endfor %}
                           </div>
                        </div>
                     </td>
                     <td>{{booking.customer.admin.first_name}}</td>
                     <td>{{booking.customer.mobile}}</td>
                     <td>{{booking.customer.city}}</td>
                     <td>{{booking.customer.state}}</td>
                     <td>{{booking.customer.area}}</td>
                     <td>{{booking.customer.zipcode}}</td>
                     <td>
                        <div class="badge rounded-pill bg-light p-2 text-uppercase px-3"><i
                           class='bx bxs-circle me-1'></i>{{booking.status}}</div>
                     </td>
                     <td>
                        {% if booking.bookingproduct_set.exists %}
                        Rs {{ booking.bookingproduct_set.first.total_price }}
                        {% else %}
                        N/A
                        {% endif %} 
                     </td>
                     <td class="nowrap">{{booking.booking_date}}</td>
                     </td>
                     <td class="nowrap">
                        {% if booking.supported_by %}
                        {{booking.supported_by.admin.username}}
                        {% elif booking.admin_by%}
                        {{booking.admin_by.admin.username}}
                        {% else %}
                        Website
                        {% endif %}
                     </td>
                     <td>
                        {% if booking.status == "cancelled" %}
                        <button class="btn btn-sm btn-warning" data-bs-toggle="modal" data-bs-target="#exampleSmallModal{{booking.id}}" disabled>Assign Task</button> 
                        {% else %}
                        <a href="{% url 'admin_List_of_expert' i.id %}"><button class="btn btn-sm btn-warning" >Assign Task</button></a>
                        {% endif %}
                     </td>
                     <td>
                        <div class="d-flex">
                           {% if booking.status == "cancelled" or booking.status == "completed" %}
                           <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#exampleVerticallycenteredModal{{booking.id}}" disabled>Reschedule</button>
                           <button class="btn btn-sm btn-danger ms-3" data-bs-toggle="modal" data-bs-target="#exampleDangerModal{{booking.id}}" disabled>Cancel</button>
                           {% else %}
                           <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#exampleVerticallycenteredModal{{booking.id}}">Reschedule</button>
                           {% endif %}
                           <button class="btn btn-sm btn-danger ms-3" data-bs-toggle="modal" data-bs-target="#exampleDangerModal{{booking.id}}">Cancel</button>
                     <td><a href="{% url 'admin_pdf_view' i.id %}">invoice</a></td> 
                     </div>
                     </td>
                  </tr>
                  {% endcomment %}
                  {% endfor %}
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>


<script>
   $(document).ready(function() {
     $('#search-input').on('keyup', function() {
       var value = $(this).val().toLowerCase();
       $('.review-list li').filter(function() {
         $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
       });
     });
   });
 </script>
{% endblock main-content %}